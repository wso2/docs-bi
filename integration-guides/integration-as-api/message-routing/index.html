
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for WSO2 Integrator: BI">
      
      
        <meta name="author" content="WSO2">
      
      
        <link rel="canonical" href="https://bi.docs.wso2.com/integration-guides/integration-as-api/message-routing/">
      
      
        <link rel="prev" href="../message-transformation/">
      
      
        <link rel="next" href="../../file-integration/file-integration-with-directory-service/">
      
      <link rel="icon" href="../../../images/bi-logo.svg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.2">
    
    
      
        <title>Message Routing - WSO2 Integrator: BI Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7bf56d0a.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<!-- Added the font from google fonts -->
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel="stylesheet">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/lib/highlightjs/styles/vs.min.css">
    
      <link rel="stylesheet" href="../../../assets/css/blue-palette-alt1.css">
    
      <link rel="stylesheet" href="../../../assets/css/mitheme.css">
    
      <link rel="stylesheet" href="../../../assets/css/custom.css">
    
      <link rel="stylesheet" href="../../../assets/lib/json-formatter/json-formatter.css">
    
      <link rel="stylesheet" href="../../../assets/css/config-catalog.css">
    
      <link rel="stylesheet" href="../../../assets/lib/fontawesome-free-6.3.0-web/css/all.min.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){
    w[l]=w[l]||[];w[l].push({
        'gtm.start':
            new Date().getTime(),event:'gtm.js'
    });var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.setAttributeNode(d.createAttribute('data-ot-ignore'));j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5CR98L58');</script>
<!-- End Google Tag Manager -->

    
    
<meta name="google-site-verification" content="pRwRUP0jDUECheRt5DziuVd3gSs2UTw6EhL4nud3NMk" />


  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#content-based-message-routing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!--
 * Copyright (c) 2024, WSO2 LLC. (http://www.wso2.com) All Rights Reserved.
 *
 * WSO2 LLC. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->





<header class="md-header md-header--shadow" data-md-component="header" id="page-header" data-url="" data-lang="en">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="WSO2 Integrator: BI Documentation"
       class="md-header__button md-logo" aria-label="WSO2 Integrator: BI Documentation" data-md-component="logo">
      
  <img src="../../../images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WSO2 Integrator: BI Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Message Routing
            
          </span>
        </div>
      </div>
    </div>
    
    <form class="md-header__option" data-md-component="palette">
      
      
      <input class="md-option" data-md-color-media="(prefers-color-scheme)"
             data-md-color-scheme="default"
             data-md-color-primary=""
             data-md-color-accent="" 
             aria-label="Switch to dark mode"  type="radio" name="__palette"
             id="__palette_1">
      
      <label class="md-header__button md-icon" title="Switch to dark mode"
             for="__palette_3" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
      
      
      
      <input class="md-option" data-md-color-media="(prefers-color-scheme: light)"
             data-md-color-scheme="default"
             data-md-color-primary=""
             data-md-color-accent="" 
             aria-label="Switch to system preference"  type="radio" name="__palette"
             id="__palette_2">
      
      <label class="md-header__button md-icon" title="Switch to system preference"
             for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
      
      
      
      <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)"
             data-md-color-scheme="slate"
             data-md-color-primary=""
             data-md-color-accent="" 
             aria-label="Switch to light mode"  type="radio" name="__palette"
             id="__palette_3">
      
      <label class="md-header__button md-icon" title="Switch to light mode"
             for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
      
      
    </form>
    
    
    
    <label class="md-header__button md-icon" for="__search">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
    </label>
    <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
    <div class="md-header__source">
      <a href="https://github.com/wso2/docs-bi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    wso2/docs-ballerina-integrator
  </div>
</a>
    </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="WSO2 Integrator: BI Documentation" class="md-nav__button md-logo" aria-label="WSO2 Integrator: BI Documentation" data-md-component="logo">
      
  <img src="../../../images/logo.svg" alt="logo">

    </a>
    WSO2 Integrator: BI Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/wso2/docs-bi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    wso2/docs-ballerina-integrator
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Get started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Get started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/quick-start-guide/" class="md-nav__link">
        Quick Start Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/install-wso2-integrator-bi/" class="md-nav__link">
        Install WSO2 Integrator: BI
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          Develop Integrations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Develop Integrations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/develop-automation/" class="md-nav__link">
        Develop Automation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/develop-ai-agent/" class="md-nav__link">
        Develop AI Agent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/develop-integration-as-api/" class="md-nav__link">
        Develop Integration as API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/develop-event-integration/" class="md-nav__link">
        Develop Event Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/develop-file-integration/" class="md-nav__link">
        Develop File Integration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Integration Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Integration Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          AI Agents and Other Gen AI Integrations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          AI Agents and Other Gen AI Integrations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_1_1" id="__nav_3_1_1_label" tabindex="0">
          Direct LLM Invocation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1_1">
          <span class="md-nav__icon md-icon"></span>
          Direct LLM Invocation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/natural-functions/natural-functions/" class="md-nav__link">
        Natural functions(Beta)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/direct-llm-call/direct-llm-call/" class="md-nav__link">
        Direct LLM Invocation using Model providers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_1_2" id="__nav_3_1_2_label" tabindex="0">
          RAG
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1_2">
          <span class="md-nav__icon md-icon"></span>
          RAG
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/rag/rag-ingestion/" class="md-nav__link">
        Rag Ingestion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/rag/rag-query/" class="md-nav__link">
        Rag Query
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0">
          Agents
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1_3">
          <span class="md-nav__icon md-icon"></span>
          Agents
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/agents/" class="md-nav__link">
        Agents Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/agents/introduction-to-chat-agents/" class="md-nav__link">
        Introduction to Chat Agents
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/agents/introduction-to-inline-agents/" class="md-nav__link">
        Introduction to Inline Agents
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/agents/integrating-agents-with-mcp-servers/" class="md-nav__link">
        Integrating Agents with MCP Servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/agents/integrating-agents-with-external-endpoints/" class="md-nav__link">
        Integrating Agents with External Endpoints
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          Integration As API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Integration As API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../service-orchestration/" class="md-nav__link">
        Service Orchestration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../message-transformation/" class="md-nav__link">
        Message Transformation
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Message Routing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Message Routing
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-create-a-new-integration-project" class="md-nav__link">
    Step 1: Create a new integration project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-create-an-http-service" class="md-nav__link">
    Step 2: Create an HTTP service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-define-types" class="md-nav__link">
    Step 3: Define types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-add-connectors" class="md-nav__link">
    Step 4: Add connectors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-add-a-resource-method" class="md-nav__link">
    Step 5: Add a resource method
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-add-the-routing-logic" class="md-nav__link">
    Step 6: Add the routing logic
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-run-the-service" class="md-nav__link">
    Step 7: Run the service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-8-stop-the-integration" class="md-nav__link">
    Step 8: Stop the integration
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
          File Integration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          File Integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../file-integration/file-integration-with-directory-service/" class="md-nav__link">
        File Integration With Directory Service
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Developer Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Developer Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/create-a-project/" class="md-nav__link">
        Create a Project
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/wso2-integrator-bi-artifacts/" class="md-nav__link">
        WSO2 Integrator: BI Artifacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/design-the-integrations/" class="md-nav__link">
        Design the Integrations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/data-mapping/" class="md-nav__link">
        Data Mapping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/try-the-integration/" class="md-nav__link">
        Try the Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/test-the-integrations/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
      
      
      
        <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
          Debugging & Troubleshooting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_7">
          <span class="md-nav__icon md-icon"></span>
          Debugging & Troubleshooting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/debugging-and-troubleshooting/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/debugging-and-troubleshooting/debugging-within-the-editor/" class="md-nav__link">
        Debugging within the Editor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/debugging-and-troubleshooting/remote-debugging-integrations/" class="md-nav__link">
        Remote Debugging Integrations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/debugging-and-troubleshooting/capturing-strand-dumps/" class="md-nav__link">
        Capturing Strand Dumps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/debugging-and-troubleshooting/profiling-runtime-performance/" class="md-nav__link">
        Profiling Runtime Performance
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
      
      
      
        <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
          AI For Integration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_8">
          <span class="md-nav__icon md-icon"></span>
          AI For Integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/ai-for-integration/build-an-http-service-with-wso2-copilot/" class="md-nav__link">
        Build an HTTP Service With WSO2 Copilot
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
      
      
      
        <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
          Protocols and Connectors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_9">
          <span class="md-nav__icon md-icon"></span>
          Protocols and Connectors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/protocols-and-connectors/overview-of-connectors/" class="md-nav__link">
        Overview of Connectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/protocols-and-connectors/supported-protocols/" class="md-nav__link">
        Supported Protocols
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/protocols-and-connectors/build-local-connectors/" class="md-nav__link">
        Build Local Connectors
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
      
      
      
        <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
          Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_10">
          <span class="md-nav__icon md-icon"></span>
          Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10_1" >
      
      
      
        <label class="md-nav__link" for="__nav_4_10_1" id="__nav_4_10_1_label" tabindex="0">
          Migration Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_10_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_10_1">
          <span class="md-nav__icon md-icon"></span>
          Migration Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/tools/migration-tools/mulesoft-migration-tool/" class="md-nav__link">
        Mulesoft Migration Tool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/tools/migration-tools/tibco-businessworks-migration-tool/" class="md-nav__link">
        TIBCO BusinessWorks Migration Tool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/tools/migration-tools/logic-apps-migration-tool/" class="md-nav__link">
        Azure Logic Apps Migration Tool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10_2" >
      
      
      
        <label class="md-nav__link" for="__nav_4_10_2" id="__nav_4_10_2_label" tabindex="0">
          Integration Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_10_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_10_2">
          <span class="md-nav__icon md-icon"></span>
          Integration Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/tools/integration-tools/health-tool/" class="md-nav__link">
        Health Tool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/tools/integration-tools/edi-tool/" class="md-nav__link">
        EDI Tool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10_3" >
      
      
      
        <label class="md-nav__link" for="__nav_4_10_3" id="__nav_4_10_3_label" tabindex="0">
          Other Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_10_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_10_3">
          <span class="md-nav__icon md-icon"></span>
          Other Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guides/tools/other-tools/scan-tool/" class="md-nav__link">
        Scan Tool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Deploy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Deploy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/deploy-to-devant/" class="md-nav__link">
        Deploy to Devant
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
          Containerized Deployment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Containerized Deployment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/containerized-deployment/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/containerized-deployment/deploy-as-docker-image/" class="md-nav__link">
        Deploy as Docker Image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/containerized-deployment/deploy-on-kubernetes/" class="md-nav__link">
        Deploy on Kubernetes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
          VM-based Deployment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          VM-based Deployment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/vm-based-deployment/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/vm-based-deployment/deploy-on-vm-as-executable-jar/" class="md-nav__link">
        Deploy on VM as Executable JAR
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/vm-based-deployment/centralized-deployment/" class="md-nav__link">
        Centralized Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/vm-based-deployment/de-centralized-deployment/" class="md-nav__link">
        Decentralized Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/vm-based-deployment/github-action-for-cicd/" class="md-nav__link">
        GitHub Action for CICD
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/managing-configurations/" class="md-nav__link">
        Managing configurations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Observability and Monitoring
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Observability and Monitoring
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../observability-and-monitoring/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../observability-and-monitoring/monitoring-with-wso2-integrator-icp/" class="md-nav__link">
        Monitoring with WSO2 Integrator: ICP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../observability-and-monitoring/observability-with-devant/" class="md-nav__link">
        Observability with Devant
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
      
      
      
        <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
          Supported Observability Tools and Platforms
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          Supported Observability Tools and Platforms
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../observability-and-monitoring/supported-observability-tools-and-platforms/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../observability-and-monitoring/supported-observability-tools-and-platforms/prometheus/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../observability-and-monitoring/supported-observability-tools-and-platforms/jaeger/" class="md-nav__link">
        Jaeger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../observability-and-monitoring/supported-observability-tools-and-platforms/zipkin/" class="md-nav__link">
        Zipkin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../observability-and-monitoring/supported-observability-tools-and-platforms/new-relic/" class="md-nav__link">
        New Relic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../observability-and-monitoring/supported-observability-tools-and-platforms/datadog/" class="md-nav__link">
        Datadog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../observability-and-monitoring/supported-observability-tools-and-platforms/elastic-stack/" class="md-nav__link">
        Elastic Stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../observability-and-monitoring/supported-observability-tools-and-platforms/opensearch/" class="md-nav__link">
        OpenSearch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          References
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          References
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/enterprise-integrations-patterns/" class="md-nav__link">
        Enterprise Integrations Patterns
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/system-requirements/" class="md-nav__link">
        System Requirements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-create-a-new-integration-project" class="md-nav__link">
    Step 1: Create a new integration project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-create-an-http-service" class="md-nav__link">
    Step 2: Create an HTTP service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-define-types" class="md-nav__link">
    Step 3: Define types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-add-connectors" class="md-nav__link">
    Step 4: Add connectors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-add-a-resource-method" class="md-nav__link">
    Step 5: Add a resource method
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-add-the-routing-logic" class="md-nav__link">
    Step 6: Add the routing logic
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-run-the-service" class="md-nav__link">
    Step 7: Run the service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-8-stop-the-integration" class="md-nav__link">
    Step 8: Stop the integration
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                

                  

  
    <a href="https://github.com/wso2/docs-bi/edit/main/en/docs/integration-guides/integration-as-api/message-routing.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/wso2/docs-bi/raw/main/en/docs/integration-guides/integration-as-api/message-routing.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="content-based-message-routing">Content-Based Message Routing<a class="headerlink" href="#content-based-message-routing" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>In this tutorial, you'll create a service that allows users to reserve appointments at various hospitals. Requests will be directed to the appropriate hospital based on the request payload's content.
To accomplish this, youll build a REST service with a single resource in WSO2 Integrator: BI extension. The resource will handle user requests, identify the hospital endpoint based on the hospital ID, forward the request to the specified hospital service to make the reservation, and return the reservation details.</p>
<p>Heres an overview of the process flow.</p>
<p><a href="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/introduction.png"><img src="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/introduction.png" alt="Message Routing" width="70%"></a></p>
<ol>
<li>
<p>Receive a request with a JSON payload similar to the following.</p>
<p><div class="highlight"><span class="filename">ReservationRequest.json</span><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;patient&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;dob&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1940-03-19&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;ssn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;234-23-525&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;California&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;phone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8770586755&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;johndoe@gmail.com&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;doctor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;thomas collins&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;hospital_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grandoak&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;appointment_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-10-02&quot;</span>
<span class="p">}</span>
</code></pre></div>
2. Extract the <code>hospital_id</code> field and select the corresponding hospital service endpoint.</p>
<ul>
<li>grandoak -&gt; <code>http://localhost:9090/grandoak/categories</code></li>
<li>clemency -&gt; <code>http://localhost:9090/clemency/categories</code></li>
<li>pinevalley -&gt; <code>http://localhost:9090/pinevalley/categories</code> </li>
</ul>
</li>
<li>
<p>Forward the request to the selected hospital service and retrieve the response which will be similar to the following.</p>
<div class="highlight"><span class="filename">ReservationResponse.json</span><pre><span></span><code><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;appointmentNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;doctor&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;thomas collins&quot;</span><span class="p">,</span>
<span class="w">       </span><span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="w">       </span><span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;surgery&quot;</span><span class="p">,</span>
<span class="w">       </span><span class="nt">&quot;availability&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;9.00 a.m - 11.00 a.m&quot;</span><span class="p">,</span>
<span class="w">       </span><span class="nt">&quot;fee&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">7000.0</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;patientName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;confirmed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;appointmentDate&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-10-02&quot;</span>
<span class="p">}</span>
</code></pre></div>

</li>
</ol>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li><strong><a href="https://docs.docker.com/engine/install/">Docker</a></strong> installed on your machine.</li>
</ul>
<h2 id="step-1-create-a-new-integration-project">Step 1: Create a new integration project<a class="headerlink" href="#step-1-create-a-new-integration-project" title="Permanent link">&para;</a></h2>
<ol>
<li>Click on the <strong>BI</strong> icon on the sidebar.</li>
<li>Click on the <strong>Create New Integration</strong> button.</li>
<li>Enter the project name as <code>MessageRouting</code>.</li>
<li>Select Project Directory and click on the <strong>Select Location</strong> button.</li>
<li>Click on the <strong>Create New Integration</strong> button to create the integration project.</li>
</ol>
<h2 id="step-2-create-an-http-service">Step 2: Create an HTTP service<a class="headerlink" href="#step-2-create-an-http-service" title="Permanent link">&para;</a></h2>
<ol>
<li>In the design view, click on the <strong>Add Artifact</strong> button.</li>
<li>Select <strong>HTTP Service</strong> under the <strong>Integration as API</strong> category.</li>
<li>Select the <strong>+ Listeners</strong> option from the <strong>Listeners</strong> dropdown to add a new listener.</li>
<li>Enter the listener name as <code>healthListener</code>, <code>8290</code> as the port and click on the <strong>Save</strong> button. </li>
<li>Add the service base path as <code>/healthcare</code> and select the <strong>Design from Scratch</strong> option as the <strong>The contract of the service</strong>.</li>
<li>Click on the <strong>Create</strong> button to create the new service with the specified configurations.</li>
</ol>
<h2 id="step-3-define-types">Step 3: Define types<a class="headerlink" href="#step-3-define-types" title="Permanent link">&para;</a></h2>
<ol>
<li>Click on the <strong>Add Artifacts</strong> button and select <strong>Type</strong> in the <strong>Other Artifacts</strong> section.</li>
<li>Click on <strong>+ Add Type</strong> to add a new type</li>
<li>Add the <strong>Record Name</strong> as <code>ReservationRequest</code> and paste the following JSON payload. Select <strong>Make Separate Record Definitions</strong> and click on the <strong>Import</strong> button.
   <div class="highlight"><pre><span></span><code><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nt">&quot;patient&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;dob&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1940-03-19&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;ssn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;234-23-525&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;California&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;phone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8770586755&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;johndoe@gmail.com&quot;</span>
<span class="w">     </span><span class="p">},</span>
<span class="w">     </span><span class="nt">&quot;doctor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;thomas collins&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="nt">&quot;hospital_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grandoak&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="nt">&quot;appointment_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-10-02&quot;</span>
<span class="w"> </span><span class="p">}</span>
</code></pre></div></li>
<li>Repeat the above steps to add a new type named <code>ReservationResponse</code> with the following JSON payload.
    <div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;appointmentNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;doctor&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;thomas collins&quot;</span><span class="p">,</span>
<span class="w">       </span><span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="w">       </span><span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;surgery&quot;</span><span class="p">,</span>
<span class="w">       </span><span class="nt">&quot;availability&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;9.00 a.m - 11.00 a.m&quot;</span><span class="p">,</span>
<span class="w">       </span><span class="nt">&quot;fee&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">7000.0</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;patientName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;confirmed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;appointmentDate&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-10-02&quot;</span>
<span class="p">}</span>
</code></pre></div></li>
<li>
<p>The final Type diagram will look like below.     </p>
<p><a href="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/types.png"><img src="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/types.png" alt="Create Type" width="70%"></a></p>
</li>
</ol>
<h2 id="step-4-add-connectors">Step 4: Add connectors<a class="headerlink" href="#step-4-add-connectors" title="Permanent link">&para;</a></h2>
<ol>
<li>Navigate to design view and click on the <strong>Add Artifacts</strong> button and select <strong>Connection</strong> in the <strong>Other Artifacts</strong> section.</li>
<li>Search and select the <strong>HTTP Client</strong> connector.</li>
<li>Enter the connector name as <code>grandOakEp</code>, URL as <code>"http://localhost:9090/grandoak/categories"</code>.</li>
<li>
<p>Click on the <strong>Save</strong> button to create the new connector with the specified configurations.</p>
<p><a href="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/add-connector.gif"><img src="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/add-connector.gif" alt="Add Connector" width="70%"></a>
5. Repeat the above steps to add connectors for the <code>clemency</code> and <code>pinevalley</code> hospitals with the following configurations.</p>
<table>
<thead>
<tr>
<th>Connector Name</th>
<th>URL</th>
</tr>
</thead>
<tbody>
<tr>
<td>clemencyEp</td>
<td><code>"http://localhost:9090/clemency/categories"</code></td>
</tr>
<tr>
<td>pineValleyEp</td>
<td><code>"http://localhost:9090/pinevalley/categories"</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>The final connectors will look like below.     </p>
<p><a href="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/connectors.png"><img src="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/connectors.png" alt="Connectors" width="70%"></a></p>
</li>
</ol>
<details class="info" open="open"><summary>HTTP Connector</summary><p>To learn more about HTTP client, see <a href="https://ballerina.io/learn/by-example/http-client-send-request-receive-response/">Ballerina HTTP Client</a>.
See supported advanced client configurations in the <a href="https://central.ballerina.io/ballerina/http/latest#ClientConfiguration">HTTP Client Configurations</a>.</p>
</details>
<h2 id="step-5-add-a-resource-method">Step 5: Add a resource method<a class="headerlink" href="#step-5-add-a-resource-method" title="Permanent link">&para;</a></h2>
<ol>
<li>The service will have a default resource named <code>greeting</code> with the <strong>GET</strong> method. Click on three dots appear in front of the <code>/healthCare</code> service resource and select <strong>Edit</strong> from menu.</li>
<li>Then click the edit button in front of <code>/greeting</code> resource to edit the resource.</li>
<li>Change the resource HTTP method to <strong>POST</strong>.</li>
<li>Change the resource name as <code>categories/[string category]/reserve</code>.</li>
<li>Add a payload parameter named <code>reservation</code> to the resource of type <code>ReservationRequest</code>.</li>
<li>Change the 201 response return type to <code>ReservationResponse</code>.</li>
<li>Add a new response of type <strong>HttpNotFound</strong> under the responses.</li>
<li>
<p>Click on the <strong>Save</strong> button to update the resource with the specified configurations.</p>
<p><a href="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/update-resource.gif"><img src="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/update-resource.gif" alt="Update Resource" width="70%"></a></p>
</li>
</ol>
<h2 id="step-6-add-the-routing-logic">Step 6: Add the routing logic<a class="headerlink" href="#step-6-add-the-routing-logic" title="Permanent link">&para;</a></h2>
<ol>
<li>Click on the <code>categories/[string category]/reserve</code> resource to navigate to the resource implementation designer view.</li>
<li>Delete the default <code>Return</code> action from the resource.</li>
<li>Hover to the arrow after start and click the  button to add a new action to the resource.</li>
<li>Select <strong>Declare Variable</strong> from the node panel on the left. This variable will be used to store the request payload for the hospital service.</li>
<li>Change the variable name to <code>hospitalRequset</code>, type as <code>json</code> and expression as below and click <strong>Save</strong>.
    <div class="highlight"><pre><span></span><code>{
    patient: reservation.patient.toJson(),
    doctor: reservation.doctor,
    hospital: reservation.hospital,
    appointment_date: reservation.appointment_date
}
</code></pre></div></li>
<li>
<p>Add <strong>If</strong> from the node panel after <code>hospitalRequest</code> variable. Enter the conditions as <strong>If</strong> <strong>Else If</strong> blocks as below for each hospital.</p>
<ul>
<li>grandOak -&gt; <code>reservation.hospital_id == "grandoak"</code></li>
<li>clemency -&gt; <code>reservation.hospital_id == "clemency"</code></li>
<li>pineValley -&gt; <code>reservation.hospital_id == "pinevalley"</code>  </li>
</ul>
<p><a href="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/add-if.png"><img src="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/add-if.png"" alt="Add If" width="70%"></a></p>
</li>
<li>
<p>Select the <code>grandOakEP</code> condition true path  sign and select <strong>grandOakEP</strong> connector from the node panel.</p>
<p><a href="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/add-connector-action.png"><img src="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/add-connector-action.png" alt="Add Connector Action" width="70%"></a></p>
</li>
<li>
<p>Select <strong>post</strong> from the dropdown. Then, fill in the required fields with the values given below and click <strong>Save</strong>.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Variable Name</td>
<td><code>oakEPResponse</code></td>
</tr>
<tr>
<td>Variable Type</td>
<td><code>ReservationResponse</code></td>
</tr>
<tr>
<td>Resource Path</td>
<td><code>string `/${category}/reserve`</code></td>
</tr>
<tr>
<td>message</td>
<td><code>hospitalRequset</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click on the  sign again and select <strong>Return</strong> from the node panel. Select the <code>oakEPResponse</code> variable from the dropdown and click <strong>Save</strong>.</p>
<p><a href="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/add-return.png"><img src="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/add-return.png" alt="Add Return" width="70%"></a></p>
</li>
<li>
<p>The steps above will add the routing logic for the <code>grandoak</code> hospital. A variable named <code>oakEPResponse</code> will store the response from the <code>grandoak</code> hospital service. The response will be returned to the client.</p>
</li>
<li>
<p>Repeat the 7,8,9 steps for the <code>clemency</code> and <code>pinevalley</code> hospitals with the following configurations.</p>
<p><strong>clemency:</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Variable Name</td>
<td><code>clemencyEPResponse</code></td>
</tr>
<tr>
<td>Variable Type</td>
<td><code>ReserveResponse</code></td>
</tr>
<tr>
<td>Resource Path</td>
<td><code>string `/${category}/reserve`</code></td>
</tr>
<tr>
<td>message</td>
<td><code>hospitalRequset</code></td>
</tr>
</tbody>
</table>
<p><strong>pinevalley:</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Variable Name</td>
<td><code>pineValleyEPResponse</code></td>
</tr>
<tr>
<td>Variable Type</td>
<td><code>ReserveResponse</code></td>
</tr>
<tr>
<td>Resource Path</td>
<td><code>string `/${category}/reserve`</code></td>
</tr>
<tr>
<td>message</td>
<td><code>hospitalRequset</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>For the else condition, click on the <code>If</code> condition <code>Else</code> path  sign and add a <strong>Return</strong> from the node panel. Enter <code>http:NOT_FOUND</code> as the value and click <strong>Save</strong>.             </p>
</li>
<li>
<p>The final design will look like below.             </p>
<p><a href="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/final-design.png"><img src="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/final-design.png"" alt="Final Design" width="70%"></a></p>
</li>
</ol>
<h2 id="step-7-run-the-service">Step 7: Run the service<a class="headerlink" href="#step-7-run-the-service" title="Permanent link">&para;</a></h2>
<ol>
<li>Start the backend service by executing the following command in a terminal.
    <div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>hospital-backend<span class="w"> </span>-p<span class="w"> </span><span class="m">9090</span>:9090<span class="w"> </span>-d<span class="w"> </span>anuruddhal/kola-hospital-backend
</code></pre></div></li>
<li>Click on the <strong>Run</strong> on the run button in the top right corner to run the service.</li>
<li>The service will start and the service will be available at <code>http://localhost:8290/healthcare/categories/[category]/reserve</code>.</li>
<li>Click on the <strong>Try it</strong> button to open the embedded HTTP client.</li>
<li>
<p>Replace the <strong>{category}</strong> with <code>surgery</code> in the resource path and enter the following JSON payload in the request body and click on the  button to send the request.
    <div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;patient&quot;</span><span class="p">:{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;dob&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1940-03-19&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;ssn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;234-23-525&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;California&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;phone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8770586755&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;johndoe@gmail.com&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="nt">&quot;doctor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;thomas collins&quot;</span><span class="p">,</span>
<span class="nt">&quot;hospital_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grandoak&quot;</span><span class="p">,</span>
<span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="nt">&quot;appointment_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-10-02&quot;</span>
<span class="p">}</span>
</code></pre></div>
   <a href="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/run.png"><img src="https://wso2.github.io/docs-bi/assets/img/integration-guides/integration-as-api/message-routing/run.png" alt="Send Request" width="70%"></a></p>
</li>
<li>
<p>The response will be similar to the following.
   <div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="nt">&quot;appointmentNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="nt">&quot;doctor&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;thomas collins&quot;</span><span class="p">,</span>
<span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;surgery&quot;</span><span class="p">,</span>
<span class="nt">&quot;availability&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;9.00 a.m - 11.00 a.m&quot;</span><span class="p">,</span>
<span class="nt">&quot;fee&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">7000.0</span>
<span class="p">},</span>
<span class="nt">&quot;patient&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="nt">&quot;dob&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1940-03-19&quot;</span><span class="p">,</span>
<span class="nt">&quot;ssn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;234-23-525&quot;</span><span class="p">,</span>
<span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;California&quot;</span><span class="p">,</span>
<span class="nt">&quot;phone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8770586755&quot;</span><span class="p">,</span>
<span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;johndoe@gmail.com&quot;</span>
<span class="p">},</span>
<span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="nt">&quot;confirmed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="nt">&quot;appointmentDate&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-10-02&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
</li>
<li>Optionally, you can test the service using curl command as below.
   <div class="highlight"><pre><span></span><code><span class="w"> </span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8290/healthcare/categories/surgery/reserve&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1"> &quot;patient&quot;: {</span>
<span class="s1"> &quot;name&quot;: &quot;John Doe&quot;,</span>
<span class="s1"> &quot;dob&quot;: &quot;1940-03-19&quot;,</span>
<span class="s1"> &quot;ssn&quot;: &quot;234-23-525&quot;,</span>
<span class="s1"> &quot;address&quot;: &quot;California&quot;,</span>
<span class="s1"> &quot;phone&quot;: &quot;8770586755&quot;,</span>
<span class="s1"> &quot;email&quot;: &quot;johndoe@gmail.com&quot;</span>
<span class="s1"> },</span>
<span class="s1"> &quot;doctor&quot;: &quot;thomas collins&quot;,</span>
<span class="s1"> &quot;hospital_id&quot;: &quot;grandoak&quot;,</span>
<span class="s1"> &quot;hospital&quot;: &quot;grand oak community hospital&quot;,</span>
<span class="s1"> &quot;appointment_date&quot;: &quot;2023-10-02&quot;</span>
<span class="s1"> }&#39;</span>
</code></pre></div></li>
</ol>
<h2 id="step-8-stop-the-integration">Step 8: Stop the integration<a class="headerlink" href="#step-8-stop-the-integration" title="Permanent link">&para;</a></h2>
<ol>
<li>Click on the <strong>Stop</strong> button to stop the integration.</li>
<li>Stop the hospital backend server by running the following command:
   <div class="highlight"><pre><span></span><code>docker<span class="w"> </span>stop<span class="w"> </span>hospital-backend
</code></pre></div></li>
</ol>





                
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5CR98L58" height="0" width="0"
                  style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
      
        <footer class="md-footer">
  
  
  <nav class="md-footer__inner md-grid" aria-label="Footer" >
    
    
    <a href="../message-transformation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Message Transformation" rel="prev">
      <div class="md-footer__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </div>
      <div class="md-footer__title">
        <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Previous
                </span>
          Message Transformation
        </div>
      </div>
    </a>
    
    
    
    <a href="../../file-integration/file-integration-with-directory-service/" class="md-footer__link md-footer__link--next" aria-label="Next: File Integration With Directory Service" rel="next">
      <div class="md-footer__title">
        <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Next
                </span>
          File Integration With Directory Service
        </div>
      </div>
      <div class="md-footer__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
      </div>
    </a>
    
  </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  <div class="footer-copyright-left">
  
    <div class="md-copyright__highlight">
      WSO2 Integrator: BI - Documentation
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
  </div>
  <div class="footer-copyright-right">
    <div class="footer-copyright-top">
      Copyright &copy; <a href="https://wso2.com/">WSO2</a> LLC (2025)
    </div>
    <div class="footer-copyright-bottom">
      Content licensed under <a href="https://creativecommons.org/licenses/by/4.0">CC By 4.0.</a> | Sample code
      licensed under <a href="http://www.apache.org/licenses/">Apache 2.0</a>.
    </div>
  </div>
</div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.action.edit", "content.action.view", "navigation.path", "navigation.top"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.fc8c2696.min.js"></script>
      
        <script src="../../../assets/lib/highlightjs/highlight.min.js"></script>
      
        <script src="../../../assets/lib/json-formatter/json-formatter.umd.js"></script>
      
        <script src="../../../assets/js/mitheme.js"></script>
      
    
  </body>
</html>